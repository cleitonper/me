language: node_js
node_js:
  - 14
cache:
  yarn: true
  directories:
    - ~/.npm
    - ~/.cache
    - node_modules
install:
  - yarn install --frozen-lockfile
  - yarn cypress install
  - yarn cypress verify
stages:
  - Static Analysis
  - Tests
  - Build
jobs:
  include:
    - stage: Static Analysis
      script: yarn lint:check
      name: lint:check
    - script: yarn type:check
      name: type:check
    - stage: Tests
      name: unit
      script: yarn test:unit
    - name: integration
      script: yarn test:e2e
    - stage: Build
      name: production
      script: yarn build
